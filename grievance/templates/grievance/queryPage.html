<!--
<!DOCTYPE html>
<html lang="en" dir="ltr">
<meta charset="utf-8">
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<meta name="viewport" content="width=device-width, initial-scale=1" >
  <head>-->


    {% extends 'grievance/level2base.html' %}
    {% load static %}
    
    
    {% block content %}
    
    
    
    
    
    <section class="container-fluid m-0 " id="main">
    
    
        <br><br><br>
    
        <div class="row container-fluid pt-4 d-flex justify-content-center table-primary pb-3">
    
    
            <div class="col-md-2">
                <label for="name"><strong>Student Name</strong> </label>
                <input class="form-control" id="name" style="text-align: center;" name="name" value='{{name}}' disabled
                    type="text">
            </div>
            <div class="col-md-2">
                <label for="student_id"><strong>Student Id</strong> </label>
                <input class="form-control" id="student_id" style="text-align: center;" name="student_id"
                    value='{{student_id}}' disabled type="text">
            </div>
    
            <!-- <div class="col-md-2">
              <label for="PS"><strong>Nature of Query</strong> </label>
              <input class="form-control" id="nature" name="nature" style="text-align: center;"
                value='{{applcationStatusObjects.0.natureOfQuery}}' disabled type="text">
            </div> -->
            <div class="col-md-2">
                <label for="PS"><strong>Nature of Query</strong> </label>
                <input class="form-control" id="nature" name="nature" style="text-align: center;" disabled type="text">
            </div>
            <div class="col-md-2">
                <label for="CG"><strong>CG</strong> </label>
                <input class="form-control" id="CG" name="CG" style="text-align: center;" value='{{grievanceFormObject.cg}}'
                    disabled type="text">
            </div>
            <div class="col-md-2">
                <label for="Offshoot"><strong>Offshoot</strong> </label>
                <input class="form-control" id="offshoot" name="offshoot" style="text-align: center;"
                    value='{{grievanceFormObject.offShoot}}' disabled type="text">
            </div>
    
        </div>
        <hr width="80%">
    
    
    
    
    
    
    
        <div class="table-light site-section" id="informativeQueryDiv">
            <!-- QUERY 1 -->
            <form class="signup-form1 shadow p-3 mb-5 table-light rounded" id="informativeQuery1Form" action=""
                method="post" readonly>
                {% csrf_token %}
                <h2 class="text-center"> Query 1 </h2>
                <br />
    
                <fieldset id="informativeQuery1Entries">
                    <div class="form-group row" id="informativeQuery1DescriptionDiv" name="informativeQuery1DescriptionDiv">
                        <label for="userid" class="col-sm-2 col-form-label">Query</label>
                        <div class="col-sm-9">
                            <textarea class="form-control" id="informativeQuery1Description" rows="4" cols="20"
                                name="informativeQuery1Description" readonly>Placeholder</textarea>
                        </div>
                    </div>
                </fieldset>
    
                <div class="form-group row" id="informativeQuery1ReplyDiv" name="informativeQuery1ReplyDiv">
                    <label for="userid" class="col-sm-2 col-form-label">Reply</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" id="informativeQuery1Reply" rows="4" cols="20"
                            name="informativeQuery1Reply" {% if numberOfAttempts > 1 %} disabled {% endif %}>Placeholder</textarea>
                    </div>
                </div>
    
                <div class="form-group text-center">
                    <button type="submit" id="informativeQuery1Submit" name="informativeQuery1Submit" onclick="sendData(1)"
                        value="informativeQuery1Submit" class="btn btn-default"
                        style="background-color: #428bca; color: white">Submit</button>
                </div>
            </form>
    
    
    
    
            <!-- QUERY 2 -->
    
    
    
    
            <form class="signup-form1 shadow p-3 mb-5 table-light rounded" id="informativeQuery2Form" action=""
                method="post" style="display: none;" readonly>
                {% csrf_token %}
                <h2 class="text-center"> Query 2 </h2>
                <br />
    
                <fieldset id="informativeQuery2Entries">
                    <div class="form-group row" id="informativeQuery2DescriptionDiv" name="informativeQuery2DescriptionDiv">
                        <label for="userid" class="col-sm-2 col-form-label">Query</label>
                        <div class="col-sm-9">
                            <textarea class="form-control" id="informativeQuery2Description" rows="4" cols="20"
                                name="informativeQuery2Description" readonly>Placeholder</textarea>
                        </div>
                    </div>
                </fieldset>
    
                <div class="form-group row" id="informativeQuery2ReplyDiv" name="informativeQuery2ReplyDiv">
                    <label for="userid" class="col-sm-2 col-form-label">Reply</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" id="informativeQuery2Reply" rows="4" cols="20"
                            name="informativeQuery2Reply" {% if numberOfAttempts > 2 %} disabled {% endif %}>Placeholder</textarea>
                    </div>
                </div>
    
                <div class="form-group text-center">
                    <button type="submit" id="informativeQuery2Submit" name="informativeQuery2Submit"
                        value="informativeQuery2Submit" class="btn btn-default"
                        style="background-color: #428bca; color: white">Submit</button>
                </div>
            </form>
    
    
    
            <!-- QUERY 3 -->
    
    
    
            <form class="signup-form1 shadow p-3 mb-5 table-light rounded" id="informativeQuery3Form" action=""
                method="post" style="display: none;" readonly>
                {% csrf_token %}
                <h2 class="text-center"> Query 3 </h2>
                <br />
    
                <fieldset id="informativeQuery3Entries">
                    <div class="form-group row" id="informativeQuery3DescriptionDiv" name="informativeQuery1DescriptionDiv">
                        <label for="userid" class="col-sm-2 col-form-label">Query</label>
                        <div class="col-sm-9">
                            <textarea class="form-control" id="informativeQuery3Description" rows="4" cols="20"
                                name="informativeQuery3Description" readonly>Placeholder</textarea>
                        </div>
                    </div>
                </fieldset>
    
                <div class="form-group row" id="informativeQuery3ReplyDiv" name="informativeQuery1ReplyDiv">
                    <label for="userid" class="col-sm-2 col-form-label">Reply</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" id="informativeQuery3Reply" rows="4" cols="20"
                            name="informativeQuery3Reply">Placeholder</textarea>
                    </div>
                </div>
    
                <div class="form-group text-center">
                    <button type="submit" id="informativeQuery3Submit" name="informativeQuery1Submit"
                        value="informativeQuery3Submit" class="btn btn-default"
                        style="background-color: #428bca; color: white">Submit</button>
                </div>
            </form>
    
    
    
    
        </div>
    
    
    
    
<script type="text/javascript">

    $('#priority-message').hide();
    $('#publish-message1').hide();
    $('#publish-message2').hide();
    $('#publish-message3').hide();
    $('#remarks-message1').hide();
    $('#remarks-message2').hide();
    $('#remarks-message3').hide();
    $('#newStation-message1').hide();
    $('#newStation-message2').hide();
    $('#newStation-message3').hide();



    var numberOfAttempts = '{{numberOfAttempts}}';

    if (numberOfAttempts > 1) {
        $('#informativeQuery2Form').show();
        $('#informativeQuery1Submit').hide();
        if (numberOfAttempts > 2) {
            $('#informativeQuery3Form').show();
            $('#informativeQuery2Submit').hide();
        }
    }



    function sendData(button) {

        var attempt = numberOfAttempts;
        $('#publish-message' + attempt).hide();
        $('#newStation-message' + attempt).hide();
        $('#remarks-message' + attempt).hide();
        var publish = $("input:radio[name='publish-option" + attempt + "']:checked").val();
        var remarks = $("#remarks" + attempt).val();
        var newStation = $("#newStation" + attempt).val();
        console.log(newStation)

        if (!publish) {
            $('#publish-message' + attempt).show();
        }
        else if (!remarks)
            $('#remarks-message' + attempt).show();
        else if (button == 'accept' && !newStation)
            $('#newStation-message' + attempt).show();
        else {
            var token = '{{csrf_token}}'
            $.ajax({
                headers: { "X-CSRFToken": token },
                url: '#',
                type: 'POST',
                data: { newStation: newStation, remarks: remarks, button: button, attempt: attempt, publish: publish },
                success: function (response) {
                    console.log('data sent successfully');
                    if (response.flag != 1)
                        location.href = '/ps-grievance/redirect/'
                }
            });
        }



    }


    $('priority-option').change(function () {

        var priority = $("input:radio[name='priority-option']:checked").val();
        console.log(priority);
        // getData(type);

    });
</script>
    
        {% endblock %}